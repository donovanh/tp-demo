<!doctype html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="./stylesheets/styleguide.css">
    <link rel="stylesheet" href="./stylesheets/main.css">
    
    <!--user-->
    <script>
      window.userData = @@include('./data/user.json')
    </script>
    <!--apps-->
    <script>
      window.appData = @@include('./data/apps.json')
    </script>
    <!--jquery-->
    <script src="../../node_modules/jquery/dist/jquery.js" inline></script>
    <!--i18next-->
    <script src="../../node_modules/i18next/dist/umd/i18next.js" inline></script>
    <!--i18nextXHRBackend-->
    <script src="../../node_modules/i18next-xhr-backend/dist/umd/i18nextXHRBackend.js" inline></script>
    <!-- jquery-i18next -->
    <script src="../../node_modules/jquery-i18next/dist/umd/jquery-i18next.js" inline></script>
    <!-- mustache -->
    <script src="../vendor/mustache.js" inline></script>
    <!-- modernizr -->
    <script src="../javascripts/modernizr.js" inline></script>
    <!-- templating_logic -->
    <script src="../javascripts/templating_logic.js" inline></script>

  </head>

  <body>
    @@include('./templates/all.mst')
    <div class="container">
      <div class="row">
        <div class="col-12">
          <h1>Components</h1>
          <article class="sections">
            <h2>Sections</h2>

            <div class="example">

<div id="section-1" class="to-render" data-template="section-template" data-settings='{
  "bgClass": "bg-white",
  "title": "White background section",
  "content": "",
  "i18n": {
    "title": "section1Title"
  }
}'></div>

              <div class="example-description">
                <h3 class="toggle-usage">Usage</h3>
                <div class="usage hidden"></div>
              </div>
            </div>

            <div class="example">
<div id="section-2" class="to-render" data-template="section-template" data-settings='{
  "bgClass": "bg-none",
  "title": "Transparent background section",
  "content": "",
  "i18n": {
    "title": "section2Title"
  }
}'></div>
              <div class="example-description">
                <h3 class="toggle-usage">Usage</h3>
                <div class="usage hidden"></div>
              </div>
            </div>

          </article>

          <article class="page-title-example">
            <h2>Page title image</h2>
            <div class="example">

<div id="page-title-example" class="to-render" data-template="page-title-template" data-settings='{
  "image": "./images/example/storytoys.png",
  "height": 78,
  "width": 320
}'></div>

              <div class="example-description">
                <h3 class="toggle-usage">Usage</h3>
                <div class="usage hidden"></div>
              </div>
            </div>

          </article>

          <article class="assets">
            <h2>Assets</h2>

            <div class="example">

<div id="asset-1" class="to-render" data-template="asset-template" data-settings='{
  "target": "#",
  "class": "brick",
  "title": "Example brick",
  "image": "./images/bricks/mgc_brick_",
  "i18n": {
    "locale": "en",
    "title": "asset1Title"
  }
}'></div>

              <div class="example-description">
                <h3 class="toggle-usage">Usage</h3>
                <div class="usage hidden"></div>
              </div>
            </div>

            <div class="example">


<div id="asset-2" class="to-render" data-template="asset-template" data-settings='{
  "target": "#",
  "class": "book",
  "title": "Placeholder text",
  "image": "./images/icons/Apps/ST/Dino Dog.jpg",
  "i18n": { 
    "title": "asset2Title"
  }
}'></div>
              <div class="example-description">
                <h3 class="toggle-usage">Usage</h3>
                <div class="usage hidden"></div>
              </div>
            </div>

            <div class="example">

<div id="asset-3" class="to-render" data-template="asset-template" data-settings='{
  "target": "#",
  "class": "icon",
  "title": "Placeholder text",
  "image": "./images/icons/Apps/ST/Dino Dog.jpg",
  "i18n": { 
    "title": "asset3Title"
  }
}'></div>

              <div class="example-description">
                <h3 class="toggle-usage">Usage</h3>
                <div class="usage hidden"></div>
              </div>
            </div>

            <div class="example">

<div id="asset-4" class="to-render" data-template="bundle-template" data-settings='{
  "target": "#",
  "class": "bundle no-child",
  "title": "Example bundle",
  "image": "./images/bricks/mgc_brick_",
  "numberOfApps": 4,
  "price": "0.99",
  "i18n": {
    "locale": "en",
    "title": "asset4Title"
  }
}'></div>

              </script>
              <div class="example-description">
                <h3 class="toggle-usage">Usage</h3>
                <div class="usage hidden"></div>
              </div>
            </div>

            <div class="example">

<div id="asset-5" class="to-render" data-template="bundle-template" data-settings='{
  "target": "#",
  "class": "bundle with-child",
  "title": "Example bundle",
  "image": "./images/bricks/mgc_brick_",
  "childImage": "./images/icons/Apps/ST/Dino Dog.jpg",
  "numberOfApps": 4,
  "price": "0.99",
  "i18n": {
    "locale": "en",
    "title": "asset5Title"
  }
}'></div> 

              <div class="example-description">
                <h3 class="toggle-usage">Usage</h3>
                <div class="usage hidden"></div>
              </div>
            </div>

          </article>

          <article class="example-banners">
          <h2>Banners</h2>

            <div class="example">

<div id="banner-1" class="to-render" data-template="banner-template" data-settings='{
  "target": "#",
  "class": "full-width",
  "title": "Full width banner",
  "image": "./images/bricks/mgc_brick_",
  "i18n": {
    "locale": "en",
    "title": "banner1Title"
  }
}'></div> 

              <div class="example-description">
                <h3 class="toggle-usage">Usage</h3>
                <div class="usage hidden"></div>
              </div>

            </div>

            <div class="example">

<div id="banner-2" class="to-render" data-template="banner-template" data-settings='{
  "target": "#",
  "class": "half-width",
  "title": "Half width banner",
  "subtitle": "Subtitle text",
  "image": "./images/bricks/mgc_brick_",
  "i18n": {
    "locale": "en",
    "title": "banner2Title",
    "subtitle": "banner2Subtitle"
  }
}'></div> 

              <div class="example-description">
                <h3 class="toggle-usage">Usage</h3>
                <div class="usage hidden"></div>
              </div>

            </div>

            <div class="example">

<div id="banner-3" class="to-render" data-template="banner-template" data-settings='{
  "target": "#",
  "class": "two-thirds-width",
  "title": "Two-thirds width banner",
  "image": "./images/bricks/mgc_brick_",
  "i18n": {
    "locale": "en",
    "title": "banner3Title"
  }
}'></div> 

              <div class="example-description">
                <h3 class="toggle-usage">Usage</h3>
                <div class="usage hidden"></div>
              </div>

            </div>

            <div class="example">

<div id="banner-4" class="to-render" data-template="banner-template" data-settings='{
  "target": "#",
  "class": "third-width",
  "title": "One-third width banner",
  "image": "./images/bricks/mgc_brick_",
  "i18n": {
    "locale": "en",
    "title": "banner3Title"
  }
}'></div> 

              <div class="example-description">
                <h3 class="toggle-usage">Usage</h3>
                <div class="usage hidden"></div>
              </div>

            </div>

          </article>

          <article class="assets-in-sections">

            <h2>Putting assets into a section</h2>

<div id="section-inline" class="to-render" data-template="section-template" data-settings='{
  "bgClass": "bg-white",
  "title": "White background section",
  "content": "",
  "i18n": {
    "title": "sectionInlineTitle"
  }
}'>
  
<div id="inline-1" class="to-render" data-template="asset-template" data-settings='{
  "target": "#",
  "class": "icon",
  "title": "Placeholder text",
  "image": "./images/icons/Apps/ST/Dino Dog.jpg",
  "i18n": { 
    "title": "asset3Title"
  }
}'></div>

<div id="inline-2" class="to-render" data-template="asset-template" data-settings='{
  "target": "#",
  "class": "icon",
  "title": "Placeholder text",
  "image": "./images/icons/Apps/ST/Dino Dog.jpg",
  "i18n": { 
    "title": "asset3Title"
  }
}'></div>

<div id="inline-3" class="to-render" data-template="asset-template" data-settings='{
  "target": "#",
  "class": "icon",
  "title": "Placeholder text",
  "image": "./images/icons/Apps/ST/Dino Dog.jpg",
  "i18n": { 
    "title": "asset3Title"
  }
}'></div>

<div id="inline-4" class="to-render" data-template="asset-template" data-settings='{
  "target": "#",
  "class": "icon",
  "title": "Placeholder text",
  "image": "./images/icons/Apps/ST/Dino Dog.jpg",
  "i18n": { 
    "title": "asset3Title"
  }
}'></div>

<div id="inline-5" class="to-render" data-template="asset-template" data-settings='{
  "target": "#",
  "class": "icon",
  "title": "Placeholder text",
  "image": "./images/icons/Apps/ST/Dino Dog.jpg",
  "i18n": { 
    "title": "asset3Title"
  }
}'></div>

</div>

            <h2>Groups with titles - custom template</h2>

            <div class="example">
<div 
  id="mixed-1"
  class="to-render"
  data-template="section-template"
  data-child-template="asset-group-template"
  data-settings='{
    "bgClass": "bg-white"
  }'
  data-groups='[{
    "title": "First group in section",
    "titlei18nKey": "firstGroupTitle",
    "items": [
      {
        "class": "icon",
        "title": "Example icon",
        "image": "./images/icons/Apps/ST/Dino Dog.jpg"
      }, {
        "class": "icon",
        "title": "Example icon",
        "image": "./images/icons/Apps/ST/Dino Dog.jpg"
      }, {
        "class": "icon",
        "title": "Example icon",
        "image": "./images/icons/Apps/ST/Dino Dog.jpg"
      }, {
        "class": "icon",
        "title": "Example icon",
        "image": "./images/icons/Apps/ST/Dino Dog.jpg"
      }, {
        "class": "icon",
        "title": "Example icon",
        "image": "./images/icons/Apps/ST/Dino Dog.jpg"
      }
    ]
  }, {
    "title": "Second group in section",
    "titlei18nKey": "secondGroupTitle",
    "items": [
      {
        "class": "icon",
        "title": "Example icon",
        "image": "./images/icons/Apps/ST/Dino Dog.jpg"
      }, {
        "class": "icon",
        "title": "Example icon",
        "image": "./images/icons/Apps/ST/Dino Dog.jpg"
      }, {
        "class": "icon",
        "title": "Example icon",
        "image": "./images/icons/Apps/ST/Dino Dog.jpg"
      }, {
        "class": "icon",
        "title": "Example icon",
        "image": "./images/icons/Apps/ST/Dino Dog.jpg"
      }, {
        "class": "icon",
        "title": "Example icon",
        "image": "./images/icons/Apps/ST/Dino Dog.jpg"
      }
    ]
  }]'
></div>

              <div class="example-description">
                <h3 class="toggle-usage">Usage</h3>
                <div class="usage hidden"></div>
              </div>
            </div>

          </article>

          <article>
            <h2>Footer link</h2>

            <div class="example">
<div
  class="to-render"
  data-template="footer-link-template"
  data-settings='{
    "target": "#",
    "linkText": "More from TouchPress",
    "i18n": { 
      "linkTextKey": "More from TouchPress"
    }
  }'></div>

              <div class="example-description">
                <h3 class="toggle-usage">Usage</h3>
                <div class="usage hidden"></div>
              </div>
            </div>

          </article>
        </div>
      </div>
    </div>

    <script>
      // Lastly, run the localization on the page content
      // Use requestAnimationFrame to poll until page is ready to be localised
      var check = window.requestAnimationFrame;
      function poll() {
        if (window.translationsLoaded && window.templatesDone) {
          $('body').localize();
        } else {
          check(poll);
        }
      }
      // Call the poll for the first time
      poll();



      // Styleguide logic - don't include in the final index 
      $('.toggle-usage').click(function() {
        $(this).toggleClass('hide');
        $(this).parent().find('.usage').toggleClass('hidden');
      });

      document.getHTML= function(who, deep){
          if(!who || !who.tagName) return '';
          var txt, ax, el= document.createElement("div");
          el.appendChild(who.cloneNode(false));
          txt= el.innerHTML;
          if(deep){
              ax= txt.indexOf('>')+1;
              txt= txt.substring(0, ax)+who.innerHTML+ txt.substring(ax);
          }
          el= null;
          return txt;
      }

      var escape = document.createElement('textarea');
      function escapeHTML(html) {
          escape.textContent = html;
          return escape.innerHTML;
      }
      // Render the usage instructions
      $('.to-render').each(function(index, item) {
        // Generate the usage section
        var exampleHTML = escapeHTML(document.getHTML(item, false).replace(/&quot;/g, '"'));
        var newCodeBlock = '<pre><code>'+ exampleHTML +'</code></pre>';
        $(item).parent().find('.usage').html(newCodeBlock);
      });
    </script>
  </body>
</html>

